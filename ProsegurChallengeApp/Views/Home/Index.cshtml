@{
    ViewData["Title"] = "Home page";
}
<h1>Órdenes</h1>
<h4>Listado</h4>
<hr />
<div class="text-end">
    <button onclick="location.href='@Url.Action("Index", "Orden" )'" class="btn btn-primary">Crear Orden</button>
</div>
<br />
<table class="table table-bordered table-striped" id='tblOrdenes'>
    <thead class="bg-dark text-white">
        <tr>
            <td>Descripción</td>
            <td>Provincia</td>
            <td>Importe Total</td>
            <td>Tiempo Realización</td>
            <td>Usuario</td>
            <td>Fecha</td>
        </tr>
    </thead>
    <tbody>
        @*@foreach(Global.Entity.Employee item in Model)
        {
        <tr>
        <td>
        @Html.DisplayFor(itemdisplay=>item.Code)
        @Html.HiddenFor(itemdisplay=>item.Code)
        </td>
        <td>
        @Html.DisplayFor(itemdisplay=>item.Name)
        </td>
        <td>
        @Html.DisplayFor(itemdisplay=>item.Email)
        </td>
        <td>
        @Html.DisplayFor(itemdisplay=>item.Phone)
        </td>
        <td>
        @Html.DisplayFor(itemdisplay=>item.Designation)
        </td>
        <td>
        <a onclick="FunEdit(this)" class="btn btn-primary">Edit</a> |
        <a onclick="FunRemove(this)" class="btn btn-danger">Remove</a>
        </td>
        </tr>
        }*@
    </tbody>

</table>

<script src="~/lib/jQuery-1.12.4/jquery-1.12.4.js"></script>
<link rel="stylesheet" href="~/lib/dataTables/css/jquery.dataTables.css" />
<script src="~/lib/dataTables/js/jquery.dataTables.js"></script>

<style type="text/css">
    #tbllist_filter {
        margin-bottom: 1%;
    }
</style>

<script type="text/javascript">       
    $(document).ready(function() {
        CargarOrdenes();
    });    

    function CargarOrdenes() {
        var columns = [];
        $.ajax({
            type: "POST",
            url: "/Orden/GetOrdenes",            
            success: function(data) {               
                console.log(data);
                // $.each(data, function(key, value) {                    
                //     columns.push([value.descripcion, value.idProvincia, value.importe, value.tiempoRealizacion, value.idUsuario, value.fecha])
                // })
                // console.log(columns);                
                
                $('#tblOrdenes').DataTable({                        
                    data: data,
                    columns: [
                            { "data": "descripcion" },
                            { "data": "idProvincia" },
                            { "data": "importe" },
                            { "data": "tiempoRealizacion" },
                            { "data": "idUsuario" },
                            { "data": "fecha" }
                    ]
                });
            },
            failure: function(err) {
                console.log(err);
            }
        });

        // $('#tblOrdenes').DataTable({
        //     "data": columns
        // });

        // $('#tblOrdenes').DataTable({
        //      columns: [ { empdata: "descripcion" },
        //                 { empdata: "idProvincia" },
        //                 { empdata: "importe" },
        //                 { empdata: "tiempoRealizacion" },
        //                 { empdata: "idUsuario" },
        //                 { empdata: "fecha" }
        //               ]
        // });


        // $('#tblOrdenes').DataTable( {
        //     ajax: {
        //        url: '/Orden/GetOrdenes',
        //        type: "GET",
        //        async: false,
        //        datatype: "json",
        //        failure: function(err) {
        //          console.log(err);
        //       }
        //     },
        //     columns: [
        //                 { data: "descripcion" },
        //                 { data: "idProvincia" },
        //                 { data: "importe" },
        //                 { data: "tiempoRealizacion" },
        //                 { data: "idUsuario" },
        //                 { data: "fecha" }
        //     ]
        // } );
    }

</script>
